(this["webpackJsonptest-router"]=this["webpackJsonptest-router"]||[]).push([[0],{235:function(e,t,a){e.exports=a(467)},240:function(e,t,a){},241:function(e,t,a){},438:function(e,t,a){},467:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(5),o=a.n(c);a(240);a(241);var l=a(468),i=a(473),s=a(470),u=a(472),m=a(471),d=a(24),p=a(475),h=a(476),f=a(12),E=a.n(f),b=a(15),g=l.a.Footer;var y=a(54);var v=function(){return r.a.createElement("div",null,r.a.createElement(s.a,null,r.a.createElement("h1",null,"\u62b1\u6b49\u5566\u5144\u5f1f\uff0c404\u4e86\uff01"),r.a.createElement("h2",null,"\u8df3\u8f6c\u9996\u9875\u5427"),r.a.createElement("div",null,r.a.createElement(y.b,{to:"404"},"\u56de\u9996\u9875\u9762"))))},O=a(80),w=a(81),j=a(29),x=a(86),k=a(83),C=a(469),S=a(477),F=function(e){Object(x.a)(a,e);var t=Object(k.a)(a);function a(){var e;return Object(O.a)(this,a),(e=t.call(this)).onsubmit=function(){return new Promise((function(t,a){E.a.get("/api/indexlist").then((function(t){var a=t.data,n=Object.values(a),r=[];n.forEach((function(e){r.push({name:e})})),e.setState({datalist:r,loading:!1})}))}))},e.onDelete=function(t){E.a.post("/api/delindex?name=".concat(t.name),t.name).then((function(a){if(a.data.acknowledged){for(var n=Array.from(e.state.datalist),r=0;r<n.length;r++){n[r].name===t.name&&(console.log(n[r].name),delete n[r])}e.setState({datalist:n}),i.a.success("\u5220\u9664\u6210\u529f")}else i.a.success("\u5220\u9664\u5931\u8d25")}))},e.state={datalist:[],loading:!1},e.onDelete=e.onDelete.bind(Object(j.a)(e)),e.onsubmit=e.onsubmit.bind(Object(j.a)(e)),e.colums=[{dataIndex:"name",title:"\u5e97\u94fa\u540d\u79f0"},{title:"\u64cd\u4f5c",dataIndex:"action",render:function(t,a){return r.a.createElement(S.a,{title:"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f\u6b64\u64cd\u4f5c\u4e0d\u53ef\u6062\u590d",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onConfirm:function(t){e.onDelete(a)},onCancel:function(){i.a.info("\u5df2\u53d6\u6d88")}},r.a.createElement(d.a,{type:"link",danger:!0},"\u5220\u9664"))}}],e}return Object(w.a)(a,[{key:"componentDidMount",value:function(){this.onsubmit()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(s.a,null,r.a.createElement(C.a,{dataSource:this.state.datalist,columns:this.colums,rowKey:"name",loading:this.state.loading})))}}]),a}(n.Component),q=a(49),_=a(82),I=a.n(_),L=a(30),N=a.n(L),R=a(106),T=R.a.Option;var D=function(){var e=Object(n.useState)([]),t=Object(q.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),l=Object(q.a)(o,2),u=l[0],m=l[1];Object(n.useEffect)((function(){h()}),[]);var p=[{title:"\u5e97\u94fa\u540d\u79f0",dataIndex:"dianpu"},{title:"\u77ed\u8bed",dataIndex:"answer"},{title:"\u64cd\u4f5c",dataIndex:"action",render:function(e,t){return r.a.createElement(d.a,{type:"primary",onClick:function(){f(t)}},"\u5220\u9664")}}],h=function(){E.a.get("/api/indexlist").then((function(e){var t=Object.values(e.data);m(t)}))},f=function(e){E.a.post("/api/delanswer",{dianpu:e.dianpu,id:e.id}).then((function(t){var n=a.filter((function(t){return t.id!==e.id}));c(n),i.a.success("\u5220\u9664\u6210\u529f")}))};return r.a.createElement("div",null,r.a.createElement(s.a,null,r.a.createElement(I.a,null,r.a.createElement(N.a,{label:"\u8bf7\u9009\u62e9\u5e97\u94fa",name:"dianpu",rules:[{required:!0,message:"\u5e97\u94fa\u540d\u662f\u5fc5\u586b\u7684\u54e6\uff01"}]},r.a.createElement(R.a,{onChange:function(e){E.a.get("/allanswer?dianpu=".concat("".concat(e))).then((function(e){console.log(e.data);var t=e.data.body.hits.hits,a=[];t.forEach((function(e){a.push({id:e._id,dianpu:e._index,answer:e._source.answer})})),c(a)}))},placeholder:"\u8bf7\u9009\u62e9\u5e97\u94fa"},u.map((function(e,t){return r.a.createElement(T,{key:t,value:e},e)})))),r.a.createElement(N.a,null,r.a.createElement(d.a,{type:"primary",htmlType:"submit"},"\u63d0\u53d6"))),r.a.createElement(C.a,{dataSource:a,columns:p,rowKey:Date.now})))};var A=function(){return r.a.createElement(s.a,null,r.a.createElement(u.a,{onFinish:function(e){E.a.post("/adddianpu",e).then((function(e){console.log(e),"\u5e97\u94fa\u5df2\u7ecf\u5b58\u5728"===e.data&&i.a.error("\u5e97\u94fa\u5df2\u7ecf\u5b58\u5728"),"\u6dfb\u52a0\u6210\u529f"===e.data&&i.a.success("\u6dfb\u52a0\u6210\u529f"),"\u6dfb\u52a0\u5931\u8d25"===e.data&&i.a.error("\u6dfb\u52a0\u5931\u8d25")}))}},r.a.createElement(N.a,{label:"\u5e97\u94fa\u540d\u79f0",name:"dianpu",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5e97\u94fa\u540d\u79f0"}]},r.a.createElement(m.a,{allowClear:!0})),r.a.createElement(N.a,null,r.a.createElement(d.a,{type:"primary",htmlType:"submit"},"\u4fdd\u5b58"))))},P=R.a.Option,H=function(e){Object(x.a)(a,e);var t=Object(k.a)(a);function a(){var e;return Object(O.a)(this,a),(e=t.call(this)).onsubmit=function(){E.a.get("/api/indexlist").then((function(t){var a=Object.values(t.data);e.setState({dataList:a})}))},e.handleFinish=function(e){console.log(e),E.a.post("/api/addanswer",e).then((function(e){"\u5e97\u94fa\u4e0d\u5b58\u5728"===e.data&&i.a.error("\u5e97\u94fa\u4e0d\u5b58\u5728"),"\u6dfb\u52a0\u6210\u529f"===e.data&&i.a.success("\u6dfb\u52a0\u6210\u529f")}))},e.state={dataList:[]},e.handleFinish=e.handleFinish.bind(Object(j.a)(e)),e.onsubmit=e.onsubmit.bind(Object(j.a)(e)),e.tempList=[],e}return Object(w.a)(a,[{key:"componentDidMount",value:function(){this.onsubmit()}},{key:"render",value:function(){return r.a.createElement(s.a,{title:"\u6dfb\u52a0\u7b54\u8bed"},r.a.createElement(I.a,{onFinish:this.handleFinish},r.a.createElement(N.a,{label:"\u5e97\u94fa",name:"dianpu",rules:[{required:!0,message:"\u5e97\u94fa\u540d\u5b57\u4e0d\u80fd\u4e3a\u7a7a"}]},r.a.createElement(R.a,{showSearch:!0,style:{width:200},placeholder:"\u9009\u62e9\u4e00\u4e2a\u5e97\u94fa",optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0}},this.state.dataList.map((function(e,t){return r.a.createElement(P,{value:e,key:e},e)})))),r.a.createElement(N.a,{label:"\u56de\u7b54",name:"answer",rules:[{required:!0,message:"\u56de\u7b54\u9879\u4e0d\u80fd\u4e3a\u7a7a"}]},r.a.createElement(m.a,null)),r.a.createElement(d.a,{type:"primary",htmlType:"submit"},"\u63d0\u4ea4")))}}]),a}(r.a.Component),K=a(90),M=a.n(K),W=a(127),z=(a(438),a(70)),B=a.n(z);function J(){return(J=Object(W.a)(M.a.mark((function e(t){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,E()({url:"/api/splite",method:"get",params:{dianpu:t.dianpu,text:t.text}}).then((function(e){a=e.data.body.tokens}));case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var V=function(e){return J.apply(this,arguments)},$=a(92),G=a(91),Q=a(38),U=a(128),X=a.n(U),Y=a(59);function Z(e){var t=Object(Y.g)().id,a=Object(n.useState)([]),c=Object(q.a)(a,2),o=c[0],l=c[1],s=Object(n.useState)(!1),u=Object(q.a)(s,2),p=u[0],h=u[1],f=Object(n.useState)(""),g=Object(q.a)(f,2),y=g[0],v=g[1],O=Object(n.useState)(""),w=Object(q.a)(O,2),j=w[0],x=w[1],k=Object(n.useState)(["\u5206\u8bcd\u7ed3\u679c"]),C=Object(q.a)(k,2),S=C[0],F=C[1];Object(n.useEffect)((function(){console.log("###id:",t),"undefined"==typeof t?(console.log("\u60a8\u662f\u76f4\u63a5\u901a\u8fc7/search\u8fdb\u6765\u7684,\u5373\u5c06\u4e3a\u60a8\u8df3\u8f6c\u56destart\u9875\u9762"),Object(b.b)().push("/start")):(console.log("###\u4f20\u8fc7\u6765\u7684\u53c2\u6570\u4e3a\uff1b",t),v(t),console.log("###selectValue:",y))}),[t,e.history,y]);var _=function(){var e=Object(W.a)(M.a.mark((function e(){var t;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",e.next=3,navigator.clipboard.readText().then((function(e){t=e}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object($.a)("1",(function(){o.length<1?i.a.info("\u6ca1\u6709\u6570\u636e\u522b\u6309\u6570\u5b57\u952e"):(B()(o[0]._source.answer),console.log(o[0]._source.answer),i.a.success("\u590d\u5236\u6210\u529f"))})),Object($.a)("2",(function(){o.length<2?i.a.info("\u6ca1\u6709\u6570\u636e\u522b\u6309\u6570\u5b57\u952e "):(B()(o[1]._source.answer),console.log(o[0]),i.a.success("\u590d\u5236\u6210\u529f"))})),Object($.a)("3",(function(){o.length<3?i.a.info("\u6ca1\u6709\u6570\u636e\u522b\u6309\u6570\u5b57\u952e "):(B()(o[2]._source.answer),console.log(o[0]._source.answer),i.a.success("\u590d\u5236\u6210\u529f"))})),Object($.a)("4",(function(){o.length<4?i.a.info("\u6ca1\u6709\u6570\u636e\u522b\u6309\u6570\u5b57\u952e "):(B()(o[3]._source.answer),console.log(o[0]._source.answer),i.a.success("\u590d\u5236\u6210\u529f"))})),Object($.a)("5",(function(){o.length<5?i.a.info("\u6ca1\u6709\u6570\u636e\u522b\u6309\u6570\u5b57\u952e "):(B()(o[4]._source.answer),console.log(o[0]),i.a.success("\u590d\u5236\u6210\u529f"))})),r.a.createElement("div",{id:"search"},r.a.createElement("div",{className:"search-text"},r.a.createElement(m.a.TextArea,{value:j,autoSize:{minRows:2,maxRows:2},onChange:function(e){x(e.target.value)}})),r.a.createElement(G.a,null,r.a.createElement(Q.a,{span:12},r.a.createElement(d.a,{type:"primary",onClick:function(){_().then((function(e){x(e)}))},className:"btn"},"\u7c98\u8d34")),r.a.createElement(Q.a,{span:12},r.a.createElement(d.a,{type:"danger",onClick:function(){var e=j;e=e.replace(/\ +/g,""),V({dianpu:y,text:e,analyzer:"ik_smart"}).then((function(e){F(e)})),E.a.get("/api/search?dianpu=".concat(y,"&querystr=").concat(e)).then((function(e){e.data.length>0?(l(e.data),h(!1),console.log("\u670d\u52a1\u5668\u8fd4\u56de\u7684\u7ed3\u679c\u6570\u91cf\uff1a".concat(e.data.length))):console.log("\u6570\u636e\u5e93\u6ca1\u6709\u8fd4\u56de\u6570\u636e".concat(e.data.length))}))},disabled:p,className:"btn"},"\u67e5\u627e"))),r.a.createElement(G.a,{style:{width:"100%",height:"100%",display:"flex",justifyContent:"space-around"}},r.a.createElement(Q.a,{span:12},r.a.createElement(X.a,null,"\u5206\u89e3\u8bcd\uff1a")),r.a.createElement(Q.a,{span:12},S.map((function(e,t){return r.a.createElement("span",{key:t,type:"danger"},e.token,r.a.createElement("span",{style:{color:"red"}},">>"))})))),o.map((function(e,t){return r.a.createElement(G.a,{className:"rongqi",key:t},r.a.createElement(Q.a,{span:5},r.a.createElement(X.a,{ellipsis:!0,type:"danger",mark:!0,strong:!0},t+1)),r.a.createElement(Q.a,{span:19},r.a.createElement(X.a,{style:{overflowWrap:" break-word"}},e._source.answer)))})))}var ee=a(478),te=a(479),ae=a(480),ne=a(481),re=a(228),ce=a.n(re),oe=R.a.Option,le=function(e){Object(x.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(O.a)(this,a),(n=t.call(this)).onload=function(){E.a.get("/api/indexlist").then((function(e){var t=Object.values(e.data);n.setState({dianpuList:t})}))},n.onChange=function(e){n.setState({dianpu:e})},n.onRedirect=function(e){var t=e.path;Object(b.b)().push("/search/".concat(t))},n.state={dianpu:"",dianpuList:["d","4","4"]},n.onload=n.onload.bind(Object(j.a)(n)),n.onChange=n.onChange.bind(Object(j.a)(n)),n.onRedirect=n.onRedirect.bind(Object(j.a)(n)),n}return Object(w.a)(a,[{key:"componentDidMount",value:function(){this.onload()}},{key:"render",value:function(){return r.a.createElement(s.a,null,r.a.createElement(I.a,{onFinish:this.onRedirect},r.a.createElement(ce.a,null,"\u8bf7\u9009\u62e9\u60a8\u9700\u8981\u67e5\u8be2\u7684\u5e97\u94fa"),r.a.createElement(N.a,{name:"path",label:"\u8bf7\u9009\u62e9\u4e00\u4e2a\u5e97\u94fa",rules:[{required:!0,message:"\u5e97\u94fa\u540d\u5b57\u4e0d\u80fd\u4e3a\u7a7a"}]},r.a.createElement(R.a,{onChange:this.onChange,defaultActiveFirstOption:!0,showSearch:!0,style:{width:200},placeholder:"\u9009\u62e9\u4e00\u4e2a\u5e97\u94fa",optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0}},this.state.dianpuList.map((function(e,t){return r.a.createElement(oe,{value:e,key:e},e)})))),r.a.createElement(N.a,null,r.a.createElement(d.a,{type:"primary",htmlType:"submit"},"\u524d\u5f80"))))}}]),a}(n.Component),ie=[{path:"/login",component:function(e){return r.a.createElement(l.a,null,r.a.createElement(s.a,{style:{width:"50vw",height:"90vh",background:"#CCFFFF",margin:"0 auto"}},r.a.createElement("h1",{style:{textAlign:"center"}},"\u767b\u5f55\u7ba1\u7406\u540e\u53f0"),r.a.createElement(u.a,{onFinish:function(e){E.a.interceptors.response.use((function(e){return e}),(function(e){return e.response&&e.response.status,Promise.resolve(e.response.status)})),E.a.post("/login?username=".concat(e.username,"&password=").concat(e.password)).then((function(e){console.log("#########res",e),200===e.status?(i.a.success("\u767b\u5f55\u6210\u529f"),Object(b.b)().push("/admin"),localStorage.setItem("user-role",e.data.role),console.log(e)):i.a.error("\u767b\u5f55\u5931\u8d25")}))}},r.a.createElement(u.a.Item,{name:"username",rules:[{required:!0,message:"\u8f93\u5165\u7528\u6237\u540d"}]},r.a.createElement(m.a,{prefix:r.a.createElement(p.a,{className:"site-form-item-icon"}),placeholder:"\u7528\u6237\u540d"})),r.a.createElement(u.a.Item,{name:"password",rules:[{required:!0,message:"\u52a1\u5fc5\u8f93\u5165\u5bc6\u7801"}]},r.a.createElement(m.a,{prefix:r.a.createElement(h.a,{className:"site-form-item-icon"}),type:"password",placeholder:"\u5bc6\u7801"})),r.a.createElement(u.a.Item,null,r.a.createElement(d.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"\u767b\u5f55")))),r.a.createElement(g,{style:{textAlign:"center"}},"\u5c71\u4e1c\u9999\u67cf\u7f51\u7edc\u79d1\u6280 \xa92020 Created by \u5f00\u53d1\u90e8"))},icon:ee.a},{path:"/start",component:le,icon:ee.a},{path:"/search/:id",component:Z,icon:p.a},{path:"/search",component:Z,icon:ee.a},{path:"/404",component:v,icon:p.a}],se=[{path:"/admin/answer",title:"\u77ed\u8bed\u5217\u8868",exact:!0,component:D,icon:te.a,key:1,requireRole:10},{title:"\u5e97\u94fa\u5217\u8868",path:"/admin/answertype",exact:!0,component:F,icon:ae.a,key:2,requireRole:10},{title:"\u65b0\u589e\u5e97\u94fa",path:"/admin/add",component:A,exact:!0,icon:ne.a,key:4,requireRole:10},{title:"\u65b0\u589e\u77ed\u8bed",path:"/admin/addanwer",component:H,exact:!0,icon:p.a,key:7,requireRole:10}],ue=a(41),me=a(474),de=a(229),pe=a.n(de),he=l.a.Header,fe=l.a.Content,Ee=l.a.Footer,be=l.a.Sider;var ge=function(e){var t=Number(localStorage.getItem("user-role"));return console.log(t),r.a.createElement(l.a,{style:{minHeight:"100vh"}},r.a.createElement(be,{collapsible:!0},r.a.createElement("div",{style:{position:"fixed",right:"50px",top:"20px"}},r.a.createElement(d.a,{type:"danger",onClick:function(){localStorage.clear(),window.location="/login"}},"\u9000\u51fa\u767b\u5f55")),r.a.createElement(ue.a,{theme:"dark",defaultSelectedKeys:["1"],mode:"inline"},se.map((function(e){return t<e.requireRole?null:r.a.createElement(pe.a,{key:e.key,onClick:function(e){}},r.a.createElement(y.b,{to:e.path,exact:e.exact},r.a.createElement(e.icon,null),r.a.createElement("span",null,e.title)))})))),r.a.createElement(l.a,{className:"site-layout"},r.a.createElement(he,{className:"site-layout-background",style:{padding:0}}),r.a.createElement(fe,{style:{margin:"0 16px"}},r.a.createElement(me.a,{style:{margin:"16px 0"}}),r.a.createElement("div",{className:"site-layout-background",style:{padding:24,minHeight:360}},e.children)),r.a.createElement(Ee,{style:{textAlign:"center"}},"\u5c71\u4e1c\u9999\u67cf\u7f51\u7edc\u79d1\u6280 \xa92020 Created by \u5f00\u53d1\u90e8")))};var ye=function(){return localStorage.getItem("user-role")?r.a.createElement(ge,null,r.a.createElement(Y.d,null,se.map((function(e){return r.a.createElement(Y.b,{key:e.path,path:e.path,exact:e.exact,render:function(t){return r.a.createElement(e.component,Object.assign({key:e.path},t))}})})),r.a.createElement(Y.a,{to:se[0].path,from:"/admin"}),r.a.createElement(Y.a,{to:"/404"}))):r.a.createElement(Y.a,{to:"/login"})};a(466),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(y.a,null,r.a.createElement(Y.d,null,r.a.createElement(Y.b,{path:"/admin",render:function(e){return r.a.createElement(ye,e)}}),ie.map((function(e){return r.a.createElement(Y.b,Object.assign({key:e.path},e))})),r.a.createElement(Y.a,{from:"/",to:"/login"}),r.a.createElement(Y.a,{to:"/404"}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[235,1,2]]]);
//# sourceMappingURL=main.fa7a08cf.chunk.js.map